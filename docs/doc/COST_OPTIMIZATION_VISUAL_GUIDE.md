# Adaptive Health Monitoring - Visual Guide

## State Machine Diagram

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚      HEALTHY STATE (60s)            â”‚
                    â”‚                                     â”‚
                    â”‚  âœ… All endpoints responding        â”‚
                    â”‚  ğŸ“Š Check interval: 60 seconds      â”‚
                    â”‚  ğŸ’° Cost: 300 checks/hour          â”‚
                    â”‚  â™»ï¸  Baseline monitoring            â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
                    Detect 1-2 failures (consecutiveFailures >= threshold)
                                   â”‚
                                   â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚     DEGRADED STATE (10s)            â”‚
                    â”‚                                     â”‚
                    â”‚  âš ï¸  1-2 endpoints failing          â”‚
                    â”‚  ğŸ“Š Check interval: 10 seconds      â”‚
                    â”‚  ğŸ’° Cost: 1,800 checks/hour        â”‚
                    â”‚  ğŸš¨ Early warning active            â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                          â”‚                          â”‚
  All OK after 3              Detect 3+ failures       System recovering
  consecutive successes    (failureCount >= threshold)   (gradual recovery)
        â”‚                          â”‚                          â”‚
        â–¼                          â–¼                          â”‚
   RECOVERY MODE              CRITICAL STATE               â”‚
   (De-escalating)              (3s)                        â”‚
                                                             â”‚
                           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
                           â”‚  CRITICAL (3s)   â”‚             â”‚
                           â”‚                  â”‚             â”‚
                           â”‚  ğŸ”´ System down  â”‚             â”‚
                           â”‚  ğŸ“Š Check: 3s    â”‚             â”‚
                           â”‚  ğŸ’° Cost: 6K/hr â”‚
                           â”‚  ğŸš¨ Emergency    â”‚
                           â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                    3+ successes â†’ recovery attempt
                                    â”‚
                                    â–¼
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚  DEGRADED (recovery) â”‚
                        â”‚  (10s interval)      â”‚
                        â”‚  System stabilizing  â”‚
                        â”‚  recoveryAttempts++  â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
                   recoveryAttempts < 5 && all OK?
                                   â”‚
                     Yes â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                                   â”‚
                    After 5 successful recovery attempts
                    System returns to:
                                   â”‚
                                   â–¼
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚   HEALTHY (60s)  â”‚
                        â”‚   âœ… Baseline     â”‚
                        â”‚   System stable   â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Timeline Example: Day in the Life

```
TIME     STATE      INTERVAL  REASON                    CHECKS/HOUR  COST
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
08:00    âœ… Healthy  60s      All endpoints OK           300         ğŸ’š
08:05    âœ… Healthy  60s      All endpoints OK           300         ğŸ’š
08:10    âœ… Healthy  60s      All endpoints OK           300         ğŸ’š
...
12:00    âœ… Healthy  60s      All endpoints OK           300         ğŸ’š
                                                          â†“
12:15    âš ï¸ Degraded 10s      Detected 1-2 failures     1,800        ğŸŸ¡
                              (DB connection slow)      
12:20    âš ï¸ Degraded 10s      Still investigating       1,800        ğŸŸ¡
12:22    ğŸ”´ Critical 3s       Detected 3+ failures      6,000        ğŸ”´
                              (Database down)
12:25    ğŸ”´ Critical 3s       Still critical            6,000        ğŸ”´
12:30    âš ï¸ Degraded 10s      System recovering         1,800        ğŸŸ¡
                              (1st recovery attempt)
12:35    âš ï¸ Degraded 10s      System recovering         1,800        ğŸŸ¡
                              (2nd recovery attempt)
12:40    âš ï¸ Degraded 10s      System recovering         1,800        ğŸŸ¡
                              (3rd recovery attempt)
12:45    ğŸŸ¢ Healthy  60s      Full recovery achieved    300          ğŸ’š
                              (returned to baseline)
...
18:00    âœ… Healthy  60s      All endpoints OK          300          ğŸ’š
```

## Code Flow Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  start()            â”‚
â”‚  Initialize & run   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  scheduleNextCheck()         â”‚
â”‚  Set interval based on state â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ WAIT        â”‚
    â”‚ (interval)  â”‚
    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  checkHealth()              â”‚
â”‚  Check 5 endpoints in       â”‚
â”‚  parallel with timeout      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ updateHealthState()         â”‚
â”‚                             â”‚
â”‚ 1. detectCriticalIssue()    â”‚
â”‚    (>50% endpoints down?)   â”‚
â”‚                             â”‚
â”‚ 2. Update state based on:   â”‚
â”‚    - consecutiveFailures    â”‚
â”‚    - recoveryAttempts       â”‚
â”‚    - failureThreshold       â”‚
â”‚                             â”‚
â”‚ 3. Log state changes        â”‚
â”‚                             â”‚
â”‚ 4. Record to failureHistory â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”œâ”€ State changed?
           â”‚  â””â”€ YES â”€â”€â†’ scheduleNextCheck()
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ notifyListeners()           â”‚
â”‚ Emit status update to UI    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â””â”€â”€â†’ Back to WAIT...
```

## Cost Savings Graph

```
                    API Calls per Hour
                    â”‚
         6000  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ CRITICAL (3s)
              â”‚
         5000 â”‚
              â”‚
         4000 â”‚
              â”‚
         3000 â”‚                            â”Œâ”€â”€â”€â”€â”€â”€â”
              â”‚                            â”‚Critical
         2000 â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”¤Duration
              â”‚        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚       â”‚      â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
              â”‚Degraded         â”‚â””â”´â”€â”€â”€â”€â”€â”€â”¤      â””â”€â”€â”¤ Recovery
         1200 â”‚        â”‚        â”‚        â”‚         â”‚  â”‚
              â”‚        â”‚        â”‚        â”‚         â”‚  â”‚
         900  â”‚        â”‚        â”‚        â”‚         â”‚  â”‚
              â”‚        â”‚        â”‚        â”‚         â”‚  â”‚
         600  â”‚        â”‚        â”‚        â”‚         â”‚  â”‚
              â”‚        â”‚        â”‚        â”‚         â”‚  â”‚
         300  â”‚â”€â”€â”€ â– â– â– â– â– â– â–â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â– â– â– â– â– â– â– â–
              â”‚    Healthy       â”‚        
              â”‚                  â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
                TIME

Legend:
_____ = Healthy (60s) - 300 calls/hour
â–â–â–â–â– = Degraded (10s) - 1,800 calls/hour  
â”â”â”â”â” = Critical (3s) - 6,000 calls/hour

95% Cost Reduction During Normal Operation!
```

## Component Interaction

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    AppInitializer                       â”‚
â”‚         Starts HealthMonitor on app load               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚   HealthMonitor          â”‚
        â”‚  (Adaptive Logic)        â”‚
        â”‚                          â”‚
        â”‚ â€¢ Tracks state           â”‚
        â”‚ â€¢ Manages intervals      â”‚
        â”‚ â€¢ Detects issues         â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚            â”‚            â”‚
        â–¼            â–¼            â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚Health  â”‚ â”‚useHealthâ”‚  â”‚API       â”‚
    â”‚Monitor â”‚ â”‚Monitor  â”‚  â”‚Health.jsxâ”‚
    â”‚Hook    â”‚ â”‚(hook)   â”‚  â”‚(admin)   â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚            â”‚            â”‚
        â–¼            â–¼            â–¼
    Status Component Display  Admin Section
    Updates        
```

## Failure Detection Logic

```
                    checkHealth()
                         â”‚
                         â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚ Check 5 endpoints with   â”‚
              â”‚ 5 second timeout each    â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚ Count failures:          â”‚
              â”‚                          â”‚
              â”‚ healthy = 5 ? 100%       â”‚
              â”‚ healthy = 4 ? 80%        â”‚
              â”‚ healthy = 3 ? 60%        â”‚
              â”‚ healthy = 2 ? 40%        â”‚
              â”‚ healthy = 1 ? 20%        â”‚
              â”‚ healthy = 0 ? 0%         â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                  â”‚                  â”‚
        â–¼                  â–¼                  â–¼
   >50% healthy?    Escalate?            De-escalate?
        â”‚                  â”‚                  â”‚
   â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
   â”‚   YES   â”‚         â”‚   YES   â”‚       â”‚   YES   â”‚
   â”‚   NO    â”‚         â”‚   NO    â”‚       â”‚   NO    â”‚
   â–¼         â–¼         â–¼         â–¼       â–¼         â–¼
 stay    Escalate  Degrade  maintain Critical  degraded
healthy  to         status   status    â”€â”€â†’    state
         critical             (adjust  â”€â”€â†’   (recover)
                               interval)
```

---

This visual guide helps understand:
1. How state transitions work
2. When intervals change
3. Cost impact timeline
4. Component interactions
5. Failure detection logic
