/**
 * Fullscreen Styles - Consolidated fullscreen selectors
 * Uses CSS custom properties to avoid repetition
 */

/* Fullscreen selector group - applies to all vendor prefixes */
.tv-frame-container:fullscreen,
.tv-frame-container:-webkit-full-screen,
.tv-frame-container:-moz-full-screen,
.tv-frame-container:-ms-fullscreen {
	background: #000 !important;
	padding: 0 !important;
	margin: 0 !important;
	overflow: hidden !important;
	transform: scale(1.15) !important;
	transform-origin: center center !important;
}

/* Mobile fullscreen - no scale */
@media (max-width: 767px) {
	.tv-frame-container:fullscreen,
	.tv-frame-container:-webkit-full-screen {
		transform: scale(1) !important;
	}
}

/* Hide TV frame decorations in fullscreen */
.tv-frame-container:fullscreen .tv-frame,
.tv-frame-container:-webkit-full-screen .tv-frame,
.tv-frame-container:-moz-full-screen .tv-frame,
.tv-frame-container:-ms-fullscreen .tv-frame {
	width: 100% !important;
	height: 100% !important;
	max-width: none !important;
	padding: 0 !important;
	margin: 0 !important;
	border-radius: 0 !important;
	box-shadow: none !important;
	background: #000 !important;
	border: none !important;
	background-image: none !important;
}

.tv-frame-container:fullscreen .tv-frame::before,
.tv-frame-container:-webkit-full-screen .tv-frame::before,
.tv-frame-container:-moz-full-screen .tv-frame::before,
.tv-frame-container:-ms-fullscreen .tv-frame::before {
	display: none;
}

/* Fullscreen tv-screen */
.tv-frame-container:fullscreen .tv-screen,
.tv-frame-container:-webkit-full-screen .tv-screen,
.tv-frame-container:-moz-full-screen .tv-screen,
.tv-frame-container:-ms-fullscreen .tv-screen {
	width: 100% !important;
	height: 100% !important;
	border: none !important;
	border-radius: 0 !important;
	box-shadow: none !important;
	background: #000 !important;
	transform: perspective(2000px) rotateX(0.3deg) !important;
}

/* Remove transform in fullscreen for content */
.tv-frame-container:fullscreen .tv-screen > *,
.tv-frame-container:-webkit-full-screen .tv-screen > *,
.tv-frame-container:-moz-full-screen .tv-screen > *,
.tv-frame-container:-ms-fullscreen .tv-screen > * {
	transform: none;
	border-radius: 0;
}

/* Fullscreen player wrapper */
.tv-frame-container:fullscreen .player-wrapper,
.tv-frame-container:-webkit-full-screen .player-wrapper,
.tv-frame-container:-moz-full-screen .player-wrapper,
.tv-frame-container:-ms-fullscreen .player-wrapper {
	width: 100% !important;
	height: 100% !important;
	transform: none !important;
	animation: none !important;
}

/* Fullscreen YouTube container */
.tv-frame-container:fullscreen .youtube-player-container,
.tv-frame-container:-webkit-full-screen .youtube-player-container,
.tv-frame-container:-moz-full-screen .youtube-player-container,
.tv-frame-container:-ms-fullscreen .youtube-player-container {
	width: 100% !important;
	height: 100% !important;
	transform: none !important;
}

/* Fullscreen iframe */
.tv-frame-container:fullscreen #desitv-player-iframe,
.tv-frame-container:-webkit-full-screen #desitv-player-iframe,
.tv-frame-container:-moz-full-screen #desitv-player-iframe,
.tv-frame-container:-ms-fullscreen #desitv-player-iframe,
.tv-frame-container:fullscreen #desitv-player-iframe iframe,
.tv-frame-container:-webkit-full-screen #desitv-player-iframe iframe,
.tv-frame-container:-moz-full-screen #desitv-player-iframe iframe,
.tv-frame-container:-ms-fullscreen #desitv-player-iframe iframe {
	width: 100% !important;
	height: 100% !important;
	position: absolute !important;
	top: 0 !important;
	left: 0 !important;
}

.tv-frame-container:fullscreen .youtube-iframe,
.tv-frame-container:-webkit-full-screen .youtube-iframe,
.tv-frame-container:-moz-full-screen .youtube-iframe,
.tv-frame-container:-ms-fullscreen .youtube-iframe {
	width: 100vw !important;
	height: 100vh !important;
	border-radius: 0 !important;
}

/* Hide elements in fullscreen */
.tv-frame-container:fullscreen .scanlines,
.tv-frame-container:-webkit-full-screen .scanlines,
.tv-frame-container:fullscreen .tap-to-unmute,
.tv-frame-container:-webkit-full-screen .tap-to-unmute,
.tv-frame-container:fullscreen .tv-screen-glow,
.tv-frame-container:-webkit-full-screen .tv-screen-glow,
.tv-frame-container:fullscreen .static-effect-tv,
.tv-frame-container:-webkit-full-screen .static-effect-tv,
.tv-frame-container:fullscreen .player-glass-overlay,
.tv-frame-container:-webkit-full-screen .player-glass-overlay {
	display: none !important;
}

/* CRT scanlines subtle in fullscreen */
.tv-frame-container:fullscreen .crt-scanlines,
.tv-frame-container:-webkit-full-screen .crt-scanlines {
	opacity: 0.15 !important;
	z-index: var(--z-overlay) !important;
}

/* Hide content wrapper when parent is fullscreen */
.tv-frame-container:fullscreen .content-wrapper,
.tv-frame-container:-webkit-full-screen .content-wrapper,
.tv-frame-container:-moz-full-screen .content-wrapper,
.tv-frame-container:-ms-fullscreen .content-wrapper {
	padding: 0 !important;
	gap: 0 !important;
	margin: 0 !important;
}

/* Hide main container and remote when fullscreen is active */
.tv-frame-container:fullscreen ~ .main-container,
.tv-frame-container:-webkit-full-screen ~ .main-container,
.tv-frame-container:-moz-full-screen ~ .main-container,
.tv-frame-container:-ms-fullscreen ~ .main-container {
	display: none;
}

.content-wrapper:has(.tv-frame-container:fullscreen) .right-panel,
.content-wrapper:has(.tv-frame-container:-webkit-full-screen) .right-panel,
.content-wrapper:has(.tv-frame-container:-moz-full-screen) .right-panel,
.content-wrapper:has(.tv-frame-container:-ms-fullscreen) .right-panel {
	display: none !important;
}

/* Hide menu in fullscreen */
.tv-frame-container:fullscreen .tv-menu-overlay,
.tv-frame-container:-webkit-full-screen .tv-menu-overlay,
.tv-frame-container:-moz-full-screen .tv-menu-overlay,
.tv-frame-container:-ms-fullscreen .tv-menu-overlay,
.tv-frame-container.ios-fullscreen-active .tv-menu-overlay,
body.ios-fullscreen-active .tv-menu-overlay {
	display: none !important;
	visibility: hidden !important;
	opacity: 0 !important;
}

/* iOS Fullscreen Support */
@supports selector(:has(*)) {
	body:has(.tv-frame-container:fullscreen),
	body:has(.tv-frame-container:-webkit-full-screen),
	body:has(.tv-frame-container:-moz-full-screen),
	body:has(.tv-frame-container:-ms-fullscreen) {
		overflow: hidden !important;
		margin: 0 !important;
		padding: 0 !important;
		width: 100vw !important;
		height: 100vh !important;
	}
}

body.fullscreen-active,
body.ios-fullscreen-active {
	overflow: hidden !important;
	margin: 0 !important;
	padding: 0 !important;
	width: 100vw !important;
	height: 100vh !important;
}

body.ios-fullscreen-active {
	position: fixed !important;
	inset: 0 !important;
}

.tv-frame-container.ios-fullscreen-active {
	position: fixed !important;
	inset: 0 !important;
	width: 100vw !important;
	height: 100vh !important;
	max-width: 100vw !important;
	max-height: 100vh !important;
	z-index: var(--z-ios-fullscreen) !important;
	background: #000 !important;
	padding: 0 !important;
	margin: 0 !important;
	display: flex !important;
	align-items: stretch !important;
	justify-content: stretch !important;
	overflow: hidden !important;
}

.tv-frame-container.ios-fullscreen-active .tv-frame {
	width: 100% !important;
	height: 100% !important;
	max-width: 100% !important;
	max-height: 100% !important;
	border-radius: 0 !important;
	padding: 0 !important;
	flex: 1 1 auto !important;
	display: flex !important;
	flex-direction: column !important;
	background: #000 !important;
}

.tv-frame-container.ios-fullscreen-active .tv-screen {
	width: 100% !important;
	height: 100% !important;
	border: none !important;
	border-radius: 0 !important;
	background: #000 !important;
}

.tv-frame-container.ios-fullscreen-active .player-wrapper,
.tv-frame-container.ios-fullscreen-active .youtube-player-container,
.tv-frame-container.ios-fullscreen-active #desitv-player-iframe {
	width: 100% !important;
	height: 100% !important;
	position: absolute !important;
	top: 0 !important;
	left: 0 !important;
	transform: none !important;
	z-index: var(--z-overlay) !important;
}

.tv-frame-container.ios-fullscreen-active #desitv-player-iframe {
	background: #000 !important;
	overflow: hidden !important;
	clip-path: inset(0) !important;
	contain: layout style paint;
}

.tv-frame-container.ios-fullscreen-active #desitv-player-iframe iframe {
	width: 100% !important;
	height: 100% !important;
	position: absolute !important;
	top: 0 !important;
	left: 0 !important;
	z-index: var(--z-overlay) !important;
	pointer-events: auto !important;
	border: none !important;
	overflow: hidden !important;
	clip-path: inset(0) !important;
}

.tv-frame-container.ios-fullscreen-active .youtube-player-container > div {
	width: 100% !important;
	height: 100% !important;
	position: absolute !important;
	top: 0 !important;
	left: 0 !important;
	z-index: var(--z-overlay) !important;
}

body.ios-fullscreen-active .main-container {
	display: flex !important;
	width: 100vw !important;
	height: 100vh !important;
	overflow: hidden !important;
	position: fixed !important;
	inset: 0 !important;
	z-index: calc(var(--z-ios-fullscreen) - 1) !important;
}

body.ios-fullscreen-active .content-wrapper {
	display: flex !important;
	width: 100vw !important;
	height: 100vh !important;
	padding: 0 !important;
	margin: 0 !important;
	gap: 0 !important;
	flex: 1 1 auto !important;
	justify-content: stretch !important;
	align-items: stretch !important;
}

body.ios-fullscreen-active .right-panel {
	display: none !important;
}

.tv-frame-container.ios-fullscreen-active .tv-screen::after,
.tv-frame-container.ios-fullscreen-active .tv-screen::before,
.tv-frame-container.ios-fullscreen-active .tv-frame::before,
.tv-frame-container.ios-fullscreen-active .tv-frame::after,
.tv-frame-container.ios-fullscreen-active .scanlines,
.tv-frame-container.ios-fullscreen-active .crt-scanlines,
.tv-frame-container.ios-fullscreen-active .tv-screen-glow,
.tv-frame-container.ios-fullscreen-active .static-effect-tv,
.tv-frame-container.ios-fullscreen-active .player-glass-overlay {
	display: none !important;
	opacity: 0 !important;
	visibility: hidden !important;
}

.tv-frame-container.ios-fullscreen-active .tv-screen > * {
	width: 100% !important;
	height: 100% !important;
	position: absolute !important;
	top: 0 !important;
	left: 0 !important;
	transform: none !important;
	z-index: var(--z-overlay) !important;
	opacity: 1 !important;
	visibility: visible !important;
}

.tv-frame-container.ios-fullscreen-active .youtube-player-container,
.tv-frame-container.ios-fullscreen-active .youtube-player-container > div,
.tv-frame-container.ios-fullscreen-active #desitv-player-iframe {
	pointer-events: auto !important;
}

.tv-frame-container.ios-fullscreen-active::after {
	content: "Double Tap to Exit";
	position: fixed;
	top: 20px;
	left: 50%;
	transform: translateX(-50%);
	background: rgba(0, 0, 0, 0.9);
	color: var(--color-primary);
	padding: var(--spacing-md) var(--spacing-xl);
	border-radius: var(--radius-md);
	font-size: var(--font-size-sm);
	text-shadow: 0 0 10px rgba(74, 158, 255, 0.8);
	z-index: calc(var(--z-ios-fullscreen) + 1);
	pointer-events: none;
	opacity: 1;
	border: 2px solid rgba(74, 158, 255, 0.6);
	font-family: var(--font-primary);
	animation: fade-in-out 4s ease-in-out;
	letter-spacing: 1px;
}

@keyframes fade-in-out {
	0%, 100% { opacity: 0; transform: translateX(-50%) translateY(-10px); }
	15%, 85% { opacity: 1; transform: translateX(-50%) translateY(0); }
}

/* iOS Fullscreen Exit Button */
.ios-exit-fullscreen-btn {
	position: fixed;
	top: 10px;
	right: 10px;
	background: rgba(0, 0, 0, 0.9);
	color: var(--color-primary);
	padding: var(--spacing-sm) var(--spacing-lg);
	border-radius: var(--radius-md);
	font-size: var(--font-size-sm);
	z-index: calc(var(--z-ios-fullscreen) + 2);
	pointer-events: auto;
	cursor: pointer;
	border: 2px solid rgba(74, 158, 255, 0.6);
	font-family: var(--font-primary);
	letter-spacing: 1px;
	font-weight: 600;
	box-shadow: 0 2px 10px rgba(0, 0, 0, 0.5);
	transition: all 0.2s ease;
	touch-action: manipulation;
	-webkit-tap-highlight-color: rgba(74, 158, 255, 0.3);
}

.ios-exit-fullscreen-btn:active {
	background: rgba(74, 158, 255, 0.2);
	transform: scale(0.95);
}

.ios-exit-fullscreen-btn:hover {
	background: rgba(74, 158, 255, 0.15);
	border-color: rgba(74, 158, 255, 0.8);
}

/* Safe area handling for notched devices */
@supports (padding: env(safe-area-inset-top)) {
	.tv-frame-container:fullscreen,
	.tv-frame-container:-webkit-full-screen {
		padding-top: env(safe-area-inset-top);
		padding-bottom: env(safe-area-inset-bottom);
		padding-left: env(safe-area-inset-left);
		padding-right: env(safe-area-inset-right);
	}
}
