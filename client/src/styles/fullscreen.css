/**
 * Fullscreen Styles - 2000s CRT TV
 * Warm charcoal frame - comfortable viewing
 */

/* ===========================================
   FULLSCREEN CONTAINER
   =========================================== */

.tv-frame-container:fullscreen,
.tv-frame-container:-webkit-full-screen,
.tv-frame-container:-moz-full-screen,
.tv-frame-container:-ms-fullscreen {
	background: #0a0a0a !important;
	position: fixed !important;
	inset: 0 !important;
	width: 100vw !important;
	height: 100vh !important;
	display: flex !important;
	align-items: center !important;
	justify-content: center !important;
	padding: 0 !important;
	margin: 0 !important;
	overflow: hidden !important;
	z-index: 99999 !important;
}

/* ===========================================
   TV FRAME - Warm Charcoal
   =========================================== */

.tv-frame-container:fullscreen .tv-frame,
.tv-frame-container:-webkit-full-screen .tv-frame,
.tv-frame-container:-moz-full-screen .tv-frame,
.tv-frame-container:-ms-fullscreen .tv-frame {
	/* Maximum size while keeping 4:3 */
	width: min(calc(98vh * 1.333), 98vw) !important;
	min-width: min(calc(98vh * 1.333), 98vw) !important;
	max-width: min(calc(98vh * 1.333), 98vw) !important;
	height: min(98vh, calc(98vw * 0.75)) !important;
	min-height: min(98vh, calc(98vw * 0.75)) !important;
	max-height: min(98vh, calc(98vw * 0.75)) !important;
	aspect-ratio: 4/3 !important;
	flex-shrink: 0 !important;
	flex-grow: 0 !important;
	
	/* Compact bezels */
	padding: 1.5% 3% 2% 3% !important;
	border-radius: clamp(14px, 2vw, 22px) !important;
	
	/* WARM CHARCOAL - comfortable for eyes */
	background: linear-gradient(180deg, 
		#3a3a3a 0%,
		#2d2d2d 10%,
		#252525 50%,
		#1f1f1f 90%,
		#1a1a1a 100%
	) !important;
	
	/* Soft shadows */
	box-shadow:
		0 10px 40px rgba(0, 0, 0, 0.6),
		0 5px 20px rgba(0, 0, 0, 0.4),
		inset 0 1px 2px rgba(255, 255, 255, 0.1),
		inset 0 0 15px rgba(0, 0, 0, 0.3),
		0 0 0 1px rgba(60, 60, 60, 0.3) !important;
	
	display: flex !important;
	flex-direction: column !important;
	align-items: center !important;
	justify-content: flex-start !important;
	position: relative !important;
}

/* Simple top highlight */
.tv-frame-container:fullscreen .tv-frame::before,
.tv-frame-container:-webkit-full-screen .tv-frame::before,
.tv-frame-container:-moz-full-screen .tv-frame::before,
.tv-frame-container:-ms-fullscreen .tv-frame::before {
	display: block !important;
	content: "" !important;
	position: absolute !important;
	top: 0 !important;
	left: 0 !important;
	right: 0 !important;
	height: 25% !important;
	background: linear-gradient(180deg, 
		rgba(255, 255, 255, 0.08) 0%,
		rgba(255, 255, 255, 0.03) 20%,
		transparent 50%
	) !important;
	border-radius: clamp(14px, 2vw, 22px) clamp(14px, 2vw, 22px) 0 0 !important;
	pointer-events: none !important;
	z-index: 1 !important;
}

/* Simple side shadows - no grills */
.tv-frame-container:fullscreen .tv-frame::after,
.tv-frame-container:-webkit-full-screen .tv-frame::after,
.tv-frame-container:-moz-full-screen .tv-frame::after,
.tv-frame-container:-ms-fullscreen .tv-frame::after {
	display: block !important;
	content: "" !important;
	position: absolute !important;
	inset: 0 !important;
	pointer-events: none !important;
	border-radius: inherit !important;
	box-shadow:
		inset 2px 0 8px rgba(0, 0, 0, 0.15),
		inset -2px 0 8px rgba(0, 0, 0, 0.15) !important;
	z-index: 1 !important;
}

/* ===========================================
   TV SCREEN - Proper aspect ratio
   =========================================== */

.tv-frame-container:fullscreen .tv-screen,
.tv-frame-container:-webkit-full-screen .tv-screen,
.tv-frame-container:-moz-full-screen .tv-screen,
.tv-frame-container:-ms-fullscreen .tv-screen {
	width: 100% !important;
	height: auto !important;
	aspect-ratio: 4/3 !important;
	flex: 1 1 auto !important;
	max-height: calc(100% - 50px) !important; /* Room for compact control bar */
	
	/* Clean bezel */
	border: clamp(3px, 0.4vw, 5px) solid #151515 !important;
	border-radius: clamp(6px, 0.8vw, 10px) !important;
	background: #000 !important;
	
	/* Clean recessed effect */
	box-shadow: 
		0 0 0 2px #1a1a1a,
		inset 0 4px 15px rgba(0, 0, 0, 0.6),
		inset 0 -2px 10px rgba(0, 0, 0, 0.4),
		inset 3px 0 10px rgba(0, 0, 0, 0.3),
		inset -3px 0 10px rgba(0, 0, 0, 0.3) !important;
	
	position: relative !important;
	overflow: hidden !important;
}

/* Keep CRT glass effect on screen */
.tv-frame-container:fullscreen .tv-screen::after,
.tv-frame-container:-webkit-full-screen .tv-screen::after,
.tv-frame-container:-moz-full-screen .tv-screen::after,
.tv-frame-container:-ms-fullscreen .tv-screen::after {
	display: block !important;
	content: "" !important;
	position: absolute !important;
	inset: 0 !important;
	background: radial-gradient(
		ellipse 90% 70% at 50% 50%,
		transparent 0%,
		transparent 40%,
		rgba(0, 0, 0, 0.1) 70%,
		rgba(0, 0, 0, 0.2) 100%
	) !important;
	pointer-events: none !important;
	z-index: 5 !important;
	border-radius: inherit !important;
}

/* ===========================================
   VIDEO CONTENT - Fill screen properly
   =========================================== */

.tv-frame-container:fullscreen .tv-screen > *,
.tv-frame-container:-webkit-full-screen .tv-screen > *,
.tv-frame-container:-moz-full-screen .tv-screen > *,
.tv-frame-container:-ms-fullscreen .tv-screen > * {
	position: absolute !important;
	top: 0 !important;
	left: 0 !important;
	width: 100% !important;
	height: 100% !important;
	border-radius: clamp(4px, 0.6vw, 8px) !important;
	overflow: hidden !important;
	/* CRT CONVEX GLASS EFFECT - curved screen illusion */
	transform: perspective(800px) rotateX(-1.5deg) scale(0.995) !important;
	transform-origin: center center !important;
	transform-style: flat !important;
	/* CRT COLOR FILTER - authentic TV look */
	filter: 
		saturate(1.15)
		contrast(1.08)
		brightness(0.97)
		sepia(0.03) !important;
}

.tv-frame-container:fullscreen .player-wrapper,
.tv-frame-container:-webkit-full-screen .player-wrapper,
.tv-frame-container:-moz-full-screen .player-wrapper,
.tv-frame-container:-ms-fullscreen .player-wrapper {
	width: 100% !important;
	height: 100% !important;
	position: absolute !important;
	top: 0 !important;
	left: 0 !important;
}

.tv-frame-container:fullscreen .youtube-player-container,
.tv-frame-container:-webkit-full-screen .youtube-player-container,
.tv-frame-container:-moz-full-screen .youtube-player-container,
.tv-frame-container:-ms-fullscreen .youtube-player-container {
	width: 100% !important;
	height: 100% !important;
	position: absolute !important;
	top: 0 !important;
	left: 0 !important;
}

.tv-frame-container:fullscreen #desitv-player-iframe,
.tv-frame-container:-webkit-full-screen #desitv-player-iframe,
.tv-frame-container:-moz-full-screen #desitv-player-iframe,
.tv-frame-container:-ms-fullscreen #desitv-player-iframe {
	width: 100% !important;
	height: 100% !important;
	position: absolute !important;
	top: 0 !important;
	left: 0 !important;
}

.tv-frame-container:fullscreen #desitv-player-iframe iframe,
.tv-frame-container:-webkit-full-screen #desitv-player-iframe iframe,
.tv-frame-container:-moz-full-screen #desitv-player-iframe iframe,
.tv-frame-container:-ms-fullscreen #desitv-player-iframe iframe {
	width: 100% !important;
	height: 100% !important;
	position: absolute !important;
	top: 0 !important;
	left: 0 !important;
	border: none !important;
}

/* ===========================================
   CONTROL BAR - Compact, subtle
   =========================================== */

.tv-frame-container:fullscreen .tv-control-bar,
.tv-frame-container:-webkit-full-screen .tv-control-bar,
.tv-frame-container:-moz-full-screen .tv-control-bar,
.tv-frame-container:-ms-fullscreen .tv-control-bar {
	display: flex !important;
	visibility: visible !important;
	opacity: 1 !important;
	width: 100% !important;
	position: relative !important;
	z-index: 10 !important;
	margin-top: clamp(4px, 0.5vh, 6px) !important;
	padding: clamp(4px, 0.5vw, 6px) clamp(8px, 1vw, 12px) !important;
	background: linear-gradient(180deg, #2a2a2a 0%, #1e1e1e 100%) !important;
	justify-content: space-between !important;
	align-items: center !important;
}

.tv-frame-container:fullscreen .tv-control-buttons,
.tv-frame-container:-webkit-full-screen .tv-control-buttons,
.tv-frame-container:-moz-full-screen .tv-control-buttons,
.tv-frame-container:-ms-fullscreen .tv-control-buttons {
	display: flex !important;
	visibility: visible !important;
	opacity: 1 !important;
	gap: clamp(3px, 0.4vw, 5px) !important;
	justify-content: flex-end !important;
	flex: 0 0 auto !important;
	margin-left: auto !important;
}

.tv-frame-container:fullscreen .tv-btn,
.tv-frame-container:-webkit-full-screen .tv-btn,
.tv-frame-container:-moz-full-screen .tv-btn,
.tv-frame-container:-ms-fullscreen .tv-btn {
	display: flex !important;
	visibility: visible !important;
	opacity: 1 !important;
	pointer-events: auto !important;
	width: clamp(16px, 1.8vw, 20px) !important;
	height: clamp(16px, 1.8vw, 20px) !important;
	min-width: clamp(16px, 1.8vw, 20px) !important;
	min-height: clamp(16px, 1.8vw, 20px) !important;
}

.tv-frame-container:fullscreen .tv-btn.power,
.tv-frame-container:-webkit-full-screen .tv-btn.power,
.tv-frame-container:-moz-full-screen .tv-btn.power,
.tv-frame-container:-ms-fullscreen .tv-btn.power {
	width: clamp(18px, 2vw, 22px) !important;
	height: clamp(18px, 2vw, 22px) !important;
	min-width: clamp(18px, 2vw, 22px) !important;
	min-height: clamp(18px, 2vw, 22px) !important;
}

.tv-frame-container:fullscreen .tv-btn .btn-label,
.tv-frame-container:-webkit-full-screen .tv-btn .btn-label,
.tv-frame-container:-moz-full-screen .tv-btn .btn-label,
.tv-frame-container:-ms-fullscreen .tv-btn .btn-label {
	display: none !important;
}

/* ===========================================
   BRAND LOGO - Subtle, inside control bar
   =========================================== */

.tv-frame-container:fullscreen .tv-brand-logo,
.tv-frame-container:-webkit-full-screen .tv-brand-logo,
.tv-frame-container:-moz-full-screen .tv-brand-logo,
.tv-frame-container:-ms-fullscreen .tv-brand-logo {
	display: flex !important;
	visibility: visible !important;
	opacity: 1 !important;
	margin-left: 0 !important;
	margin-right: auto !important;
	flex: 0 0 auto !important;
	gap: clamp(4px, 0.5vw, 6px) !important;
	order: -1 !important;
}

.tv-frame-container:fullscreen .tv-brand-logo .brand-text,
.tv-frame-container:-webkit-full-screen .tv-brand-logo .brand-text,
.tv-frame-container:-moz-full-screen .tv-brand-logo .brand-text,
.tv-frame-container:-ms-fullscreen .tv-brand-logo .brand-text {
	font-size: clamp(9px, 1vw, 12px) !important;
}

.tv-frame-container:fullscreen .tv-brand-logo .brand-model,
.tv-frame-container:-webkit-full-screen .tv-brand-logo .brand-model,
.tv-frame-container:-moz-full-screen .tv-brand-logo .brand-model,
.tv-frame-container:-ms-fullscreen .tv-brand-logo .brand-model {
	font-size: clamp(7px, 0.8vw, 10px) !important;
}

.tv-frame-container:fullscreen .tv-brand-logo::after,
.tv-frame-container:-webkit-full-screen .tv-brand-logo::after,
.tv-frame-container:-moz-full-screen .tv-brand-logo::after,
.tv-frame-container:-ms-fullscreen .tv-brand-logo::after {
	width: clamp(4px, 0.5vw, 6px) !important;
	height: clamp(4px, 0.5vw, 6px) !important;
}

/* ===========================================
   OVERLAYS - Glass overlay for interaction blocking
   =========================================== */

.tv-frame-container:fullscreen .player-glass-overlay,
.tv-frame-container:-webkit-full-screen .player-glass-overlay,
.tv-frame-container:-moz-full-screen .player-glass-overlay,
.tv-frame-container:-ms-fullscreen .player-glass-overlay {
	display: block !important;
	pointer-events: auto !important;
	z-index: 6 !important;
	background: transparent !important;
	position: absolute !important;
	top: 0 !important;
	left: 0 !important;
	width: 100% !important;
	height: 100% !important;
}

/* Disable pointer events on iframe */
.tv-frame-container:fullscreen #desitv-player-iframe iframe,
.tv-frame-container:-webkit-full-screen #desitv-player-iframe iframe,
.tv-frame-container:-moz-full-screen #desitv-player-iframe iframe,
.tv-frame-container:-ms-fullscreen #desitv-player-iframe iframe {
	pointer-events: none !important;
}

/* ===========================================
   HIDE OTHER ELEMENTS
   =========================================== */

/* Hide scanlines and effects for performance */
.tv-frame-container:fullscreen .scanlines,
.tv-frame-container:-webkit-full-screen .scanlines,
.tv-frame-container:fullscreen .tap-to-unmute,
.tv-frame-container:-webkit-full-screen .tap-to-unmute,
.tv-frame-container:fullscreen .tv-screen-glow,
.tv-frame-container:-webkit-full-screen .tv-screen-glow,
.tv-frame-container:fullscreen .static-effect-tv,
.tv-frame-container:-webkit-full-screen .static-effect-tv {
	display: none !important;
}

/* Hide right panel, remote, and ALL other content in fullscreen */
.tv-frame-container:fullscreen ~ *,
.tv-frame-container:-webkit-full-screen ~ *,
.tv-frame-container:-moz-full-screen ~ *,
.tv-frame-container:-ms-fullscreen ~ *,
.tv-frame-container.ios-fullscreen-active ~ * {
	display: none !important;
	visibility: hidden !important;
	opacity: 0 !important;
}

/* Also hide the remote overlay inside the container */
.tv-frame-container:fullscreen .remote-overlay-wrapper,
.tv-frame-container:-webkit-full-screen .remote-overlay-wrapper,
.tv-frame-container.ios-fullscreen-active .remote-overlay-wrapper {
	display: none !important;
}

/* Hide right-panel specifically */
.tv-frame-container:fullscreen + .right-panel,
.tv-frame-container:-webkit-full-screen + .right-panel,
.tv-frame-container.ios-fullscreen-active + .right-panel,
body.ios-fullscreen-active .right-panel,
html.ios-fullscreen-active .right-panel {
	display: none !important;
	visibility: hidden !important;
	opacity: 0 !important;
	position: absolute !important;
	left: -9999px !important;
}

.content-wrapper:has(.tv-frame-container:fullscreen) .right-panel,
.content-wrapper:has(.tv-frame-container:-webkit-full-screen) .right-panel {
	display: none !important;
}

/* ===========================================
   MENU OVERLAY
   =========================================== */

.tv-frame-container:fullscreen .tv-menu-overlay,
.tv-frame-container:-webkit-full-screen .tv-menu-overlay,
.tv-frame-container:-moz-full-screen .tv-menu-overlay,
.tv-frame-container:-ms-fullscreen .tv-menu-overlay {
	position: absolute !important;
	inset: 0 !important;
	z-index: 100 !important;
}

/* ===========================================
   BODY STYLES IN FULLSCREEN
   =========================================== */

@supports selector(:has(*)) {
	body:has(.tv-frame-container:fullscreen),
	body:has(.tv-frame-container:-webkit-full-screen) {
		overflow: hidden !important;
		margin: 0 !important;
		padding: 0 !important;
	}
}

/* ===========================================
   iOS/CSS FULLSCREEN - Same approach
   =========================================== */

html.ios-fullscreen-active,
body.ios-fullscreen-active {
	position: fixed !important;
	inset: 0 !important;
	width: 100vw !important;
	height: 100vh !important;
	overflow: hidden !important;
	margin: 0 !important;
	padding: 0 !important;
}

.tv-frame-container.ios-fullscreen-active {
	position: fixed !important;
	inset: 0 !important;
	width: 100vw !important;
	height: 100vh !important;
	z-index: var(--z-ios-fullscreen, 99999) !important;
	
	/* Dark background */
	background: #000 !important;
	
	/* Center the TV */
	display: flex !important;
	align-items: center !important;
	justify-content: center !important;
	/* Zero padding to maximize TV size */
	padding: 0 !important;
}

.tv-frame-container.ios-fullscreen-active .tv-frame,
body.ios-fullscreen-active .tv-frame-container .tv-frame,
html.ios-fullscreen-active .tv-frame-container .tv-frame {
	/* Maximum size keeping 4:3 */
	width: min(calc(98vh * 1.333), 98vw) !important;
	min-width: min(calc(98vh * 1.333), 98vw) !important;
	max-width: min(calc(98vh * 1.333), 98vw) !important;
	height: min(98vh, calc(98vw * 0.75)) !important;
	min-height: min(98vh, calc(98vw * 0.75)) !important;
	max-height: min(98vh, calc(98vw * 0.75)) !important;
	aspect-ratio: 4/3 !important;
	flex-shrink: 0 !important;
	flex-grow: 0 !important;
	
	/* Warm charcoal */
	padding: 1.5% 3% 2% 3% !important;
	border-radius: clamp(14px, 2vw, 22px) !important;
	
	background: linear-gradient(180deg, 
		#3a3a3a 0%,
		#2d2d2d 10%,
		#252525 50%,
		#1f1f1f 90%,
		#1a1a1a 100%
	) !important;
	
	box-shadow:
		0 10px 40px rgba(0, 0, 0, 0.6),
		0 5px 20px rgba(0, 0, 0, 0.4),
		inset 0 1px 2px rgba(255, 255, 255, 0.1),
		0 0 0 1px rgba(60, 60, 60, 0.3) !important;
	
	display: flex !important;
	flex-direction: column !important;
	position: relative !important;
}

.tv-frame-container.ios-fullscreen-active .tv-screen {
	width: 100% !important;
	height: auto !important;
	aspect-ratio: 4/3 !important;
	flex: 1 1 auto !important;
	max-height: calc(100% - 50px) !important;
	
	/* Clean bezel */
	border: clamp(3px, 0.4vw, 5px) solid #151515 !important;
	border-radius: clamp(6px, 0.8vw, 10px) !important;
	background: #000 !important;
	
	/* Clean recessed effect */
	box-shadow: 
		0 0 0 2px #1a1a1a,
		inset 0 4px 15px rgba(0, 0, 0, 0.6),
		inset 0 -2px 10px rgba(0, 0, 0, 0.4),
		inset 3px 0 10px rgba(0, 0, 0, 0.3),
		inset -3px 0 10px rgba(0, 0, 0, 0.3) !important;
	
	position: relative !important;
	overflow: hidden !important;
}

.tv-frame-container.ios-fullscreen-active .tv-screen > * {
	position: absolute !important;
	top: 0 !important;
	left: 0 !important;
	width: 100% !important;
	height: 100% !important;
	/* CRT CONVEX GLASS EFFECT - curved screen illusion */
	transform: perspective(800px) rotateX(-1.5deg) scale(0.995) !important;
	transform-origin: center center !important;
	transform-style: flat !important;
	/* CRT COLOR FILTER - authentic TV look */
	filter: 
		saturate(1.15)
		contrast(1.08)
		brightness(0.97)
		sepia(0.03) !important;
}

.tv-frame-container.ios-fullscreen-active .player-wrapper,
.tv-frame-container.ios-fullscreen-active .youtube-player-container,
.tv-frame-container.ios-fullscreen-active #desitv-player-iframe {
	width: 100% !important;
	height: 100% !important;
	position: absolute !important;
	top: 0 !important;
	left: 0 !important;
}

.tv-frame-container.ios-fullscreen-active #desitv-player-iframe iframe {
	width: 100% !important;
	height: 100% !important;
	position: absolute !important;
	top: 0 !important;
	left: 0 !important;
	border: none !important;
	pointer-events: none !important;
}

/* Keep decorations visible in iOS fullscreen */
.tv-frame-container.ios-fullscreen-active .tv-frame::before,
.tv-frame-container.ios-fullscreen-active .tv-frame::after {
	display: block !important;
	visibility: visible !important;
	opacity: 1 !important;
}

.tv-frame-container.ios-fullscreen-active .tv-control-bar {
	display: flex !important;
	visibility: visible !important;
	opacity: 1 !important;
	position: relative !important;
}

.tv-frame-container.ios-fullscreen-active .tv-brand-logo {
	display: flex !important;
	visibility: visible !important;
	opacity: 1 !important;
}

.tv-frame-container.ios-fullscreen-active .player-glass-overlay {
	display: block !important;
	pointer-events: auto !important;
	z-index: 6 !important;
}

/* Hide other content */
body.ios-fullscreen-active .right-panel,
body.ios-fullscreen-active .content-wrapper > *:not(.tv-frame-container) {
	display: none !important;
}

/* Hide scanlines in iOS fullscreen */
.tv-frame-container.ios-fullscreen-active .scanlines,
.tv-frame-container.ios-fullscreen-active .tv-screen-glow,
.tv-frame-container.ios-fullscreen-active .static-effect-tv {
	display: none !important;
}

/* ===========================================
   REMOTE OVERLAY IN FULLSCREEN
   =========================================== */

@media (min-width: 769px) {
	.tv-frame-container:fullscreen .remote-overlay,
	.tv-frame-container:-webkit-full-screen .remote-overlay,
	.tv-frame-container.ios-fullscreen-active .remote-overlay {
		z-index: 1000 !important;
		position: fixed !important;
		pointer-events: auto !important;
	}

	.tv-frame-container:fullscreen .remote-trigger-sensor,
	.tv-frame-container:-webkit-full-screen .remote-trigger-sensor,
	.tv-frame-container.ios-fullscreen-active .remote-trigger-sensor {
		z-index: 999 !important;
		position: fixed !important;
		pointer-events: auto !important;
	}
}

/* ===========================================
   SAFE AREA HANDLING - Only apply safe areas, no extra padding
   =========================================== */

@supports (padding: env(safe-area-inset-top)) {
	.tv-frame-container:fullscreen,
	.tv-frame-container:-webkit-full-screen,
	.tv-frame-container.ios-fullscreen-active {
		/* Only use safe area insets - no extra padding */
		padding-top: env(safe-area-inset-top, 0) !important;
		padding-bottom: env(safe-area-inset-bottom, 0) !important;
		padding-left: env(safe-area-inset-left, 0) !important;
		padding-right: env(safe-area-inset-right, 0) !important;
	}
}

/* ===========================================
   MOBILE - NO FULLSCREEN SUPPORT
   Fullscreen is desktop-only feature
   =========================================== */

@media (max-width: 767px) {
	/* Hide fullscreen button on mobile */
	.tv-btn.fullscreen-btn {
		display: none !important;
	}
	
	/* Prevent any fullscreen classes from activating on mobile */
	.tv-frame-container.ios-fullscreen-active {
		position: relative !important;
		width: 100% !important;
		height: auto !important;
		inset: unset !important;
		z-index: auto !important;
		background: transparent !important;
		padding: 10px !important;
	}
	
	.tv-frame-container.ios-fullscreen-active .tv-frame {
		width: 100% !important;
		max-width: 100% !important;
		height: auto !important;
		min-height: unset !important;
		max-height: unset !important;
	}
	
	/* Reset body/html classes on mobile */
	html.ios-fullscreen-active,
	body.ios-fullscreen-active {
		position: relative !important;
		width: auto !important;
		height: auto !important;
		overflow: auto !important;
	}
}
