/**
 * Responsive Breakpoints - All media queries
 * Note: CSS custom properties cannot be used in media queries, so we use actual values
 * These match the values defined in tokens.css for consistency
 */

/* Large Desktop (1400px+) - TV and remote side by side */
@media (min-width: 1400px) {
	.tv-frame {
		/* Fixed size - no change */
	}
	
	.right-panel {
		width: clamp(180px, 16vw, 220px);
	}
	
	.remote-body {
		width: clamp(180px, 16vw, 220px);
		padding: clamp(12px, 1.5vh, 16px) clamp(12px, 1.3vw, 16px) clamp(16px, 2vh, 20px);
	}
}

/* Standard Desktop (1024px - 1399px) */
@media (min-width: 1024px) and (max-width: 1399px) {
	.tv-frame {
		/* Fixed size - no change */
	}
	
	.right-panel {
		width: clamp(170px, 15vw, 210px);
	}
	
	.remote-body {
		width: clamp(170px, 15vw, 210px);
		padding: clamp(11px, 1.3vh, 13px) clamp(11px, 1.1vw, 13px) clamp(13px, 1.7vh, 17px);
	}
}

/* Tablet Landscape (768px - 1023px) - Side by side but smaller */
@media (min-width: 768px) and (max-width: 1023px) {
	.content-wrapper {
		gap: 20px;
		padding: 12px 18px;
	}
	
	.tv-frame {
		/* Responsive on tablet - maintains aspect ratio */
		width: 100% !important;
		max-width: 800px !important;
		height: auto !important;
		aspect-ratio: 4/3 !important;
		min-width: 0 !important;
		min-height: 0 !important;
	}
	
	.right-panel {
		width: clamp(160px, 14vw, 190px);
	}
	
	.remote-body {
		width: clamp(160px, 14vw, 190px);
		padding: clamp(10px, 1.2vh, 12px) clamp(9px, 1vw, 11px) clamp(12px, 1.6vh, 16px);
	}
	
	.remote-brand {
		font-size: 9px;
		margin-bottom: 8px;
	}
	
	.remote-btn.power-btn {
		width: 36px;
		height: 36px;
	}
	
	.power-icon {
		font-size: 14px;
	}
	
	.channel-display {
		padding: 5px 10px;
		margin: 6px auto 10px;
	}
	
	.channel-number {
		font-size: 18px;
	}
	
	.remote-btn.num-btn {
		padding: 8px;
		font-size: 11px;
	}
	
	.remote-btn.dpad-btn {
		padding: 6px 8px;
		font-size: 7px;
	}
	
	.remote-btn.vcr-btn {
		width: 30px;
		height: 26px;
		font-size: 10px;
	}
	
	.volume-bar-section {
		padding: 6px;
	}
	
	.keyboard-hints {
		display: none;
	}
}

/* Tablet Portrait / Large Mobile (600px - 767px) */
@media (max-width: 767px) {
	.main-container {
		min-height: 100vh;
		min-height: 100dvh;
		overflow-y: auto;
		overflow-x: hidden;
	}
	
	.content-wrapper {
		flex-direction: column;
		gap: 12px;
		padding: 8px;
		align-items: center;
	}
	
	.tv-frame-container {
		width: 100%;
		max-width: 100%;
		order: 1;
		flex: 0 0 auto;
		max-height: 55vh;
		padding: 0 8px;
		aspect-ratio: 4/3;
	}
	
	@supports not (aspect-ratio: 4/3) {
		.tv-frame-container {
			height: calc((100vw - 16px) * 0.75);
			max-height: 55vh;
		}
	}
	
	.tv-frame {
		width: 100% !important;
		max-width: 100% !important;
		height: auto !important;
		max-height: 100% !important;
		aspect-ratio: 4/3 !important;
		padding: 2.5% 5% 3.5% 5% !important;
		border-radius: 8px;
	}
	
	@supports not (aspect-ratio: 4/3) {
		.tv-frame {
			height: calc((100vw - 16px) * 0.75) !important;
			max-height: 55vh;
			min-height: calc((100vw - 16px) * 0.75) !important;
		}
	}
	
	/* Hide remote on mobile - controls are in TV frame */
	.right-panel {
		display: none !important;
	}
	
	.footer-status {
		padding: 8px 10px;
		position: fixed;
		bottom: 0;
		left: 0;
		right: 0;
		z-index: var(--z-menu);
	}
	
	.status-text {
		font-size: 7px;
	}
}

/* Small Mobile (< 600px) */
@media (max-width: 599px) {
	.main-container {
		min-height: 100vh;
		min-height: 100dvh;
		overflow-y: auto;
		overflow-x: hidden;
	}
	
	.content-wrapper {
		padding: 6px;
		gap: 10px;
		flex-direction: column;
		align-items: center;
	}
	
	.tv-frame-container {
		order: 1;
		width: 100%;
		max-width: 100%;
		flex: 0 0 auto;
		max-height: 50vh;
		padding: 0 6px;
		aspect-ratio: 4/3;
	}
	
	@supports not (aspect-ratio: 4/3) {
		.tv-frame-container {
			height: calc((100vw - 12px) * 0.75);
			max-height: 50vh;
		}
	}
	
	.tv-frame {
		width: 100% !important;
		max-width: 100% !important;
		height: auto !important;
		max-height: 100% !important;
		aspect-ratio: 4/3 !important;
		padding: 2.5% 5% 3.5% 5% !important;
		border-radius: 6px;
	}
	
	@supports not (aspect-ratio: 4/3) {
		.tv-frame {
			height: calc((100vw - 12px) * 0.75) !important;
			max-height: 50vh;
			min-height: calc((100vw - 12px) * 0.75) !important;
		}
	}
	
	.tv-screen {
		border-radius: 4px;
		border: 1.8% solid #000000 !important;
	}
	
	/* Hide remote on mobile - controls are in TV frame */
	.right-panel {
		display: none !important;
	}
	
	.main-container {
		padding-bottom: 50px;
	}
	
	.footer-status {
		padding: 5px 8px;
		position: fixed;
		bottom: 0;
		left: 0;
		right: 0;
		z-index: var(--z-menu);
	}
	
	.status-text {
		font-size: 6px;
	}
	
	.power-icon {
		font-size: 12px;
	}
	
	.led {
		width: 6px;
		height: 6px;
	}
	
	.channel-display {
		padding: 4px 8px;
		margin: 5px auto 6px;
	}
	
	.channel-label {
		font-size: 7px;
	}
	
	.channel-number {
		font-size: 16px;
	}
	
	.number-pad {
		gap: 4px;
		margin-bottom: 6px;
	}
	
	.remote-btn.num-btn {
		padding: 6px;
		font-size: 10px;
	}
	
	.dpad-section {
		margin: 6px 0;
	}
	
	.remote-btn.dpad-btn {
		padding: 5px 7px;
		font-size: 6px;
	}
	
	.mute-section {
		margin: 6px 0;
	}
	
	.remote-btn.mute-btn {
		font-size: 7px;
		padding: 5px 10px;
	}
	
	.vcr-section {
		margin-top: 6px;
		padding-top: 6px;
	}
	
	.vcr-label {
		font-size: 5px;
		margin-bottom: 4px;
	}
	
	.vcr-buttons {
		gap: 4px;
	}
	
	.remote-btn.vcr-btn {
		width: 26px;
		height: 22px;
		font-size: 9px;
	}
	
	.remote-btn.vcr-btn.small {
		width: 22px;
		height: 18px;
		font-size: 7px;
	}
	
	.volume-bar-section {
		margin-top: 6px;
		padding: 5px;
	}
	
	.volume-label {
		font-size: 5px;
	}
	
	.volume-bar {
		height: 5px;
	}
	
	.volume-percent {
		font-size: 7px;
	}
	
	.footer-status {
		padding: 5px 8px;
		position: fixed;
		bottom: 0;
		left: 0;
		right: 0;
		z-index: var(--z-menu);
	}
	
	.status-text {
		font-size: 6px;
	}
}

/* Extra Small Mobile (< 400px) - Compact design */
@media (max-width: 399px) {
	.content-wrapper {
		padding: 0;
		gap: 0;
	}
	
	.tv-frame-container {
		padding: clamp(4px, 1vh, 8px) clamp(4px, 1vw, 8px);
		aspect-ratio: 4/3;
	}
	
	@supports not (aspect-ratio: 4/3) {
		.tv-frame-container {
			height: calc((100vw - 8px) * 0.75);
		}
	}
	
	.tv-frame {
		aspect-ratio: 4/3 !important;
		padding: 1% 2% 1.5% 2% !important;
		border-radius: 8px;
		box-shadow: 
			0 12px 36px rgba(0, 0, 0, 0.5),
			0 0 0 1px rgba(255, 255, 255, 0.05);
	}
	
	@supports not (aspect-ratio: 4/3) {
		.tv-frame {
			height: calc((100vw - 8px) * 0.75) !important;
		}
	}
	
	/* Hide right panel */
	.right-panel {
		display: none !important;
	}
	
	.remote-body {
		max-width: 180px;
		padding: 8px 6px 12px;
	}
	
	.remote-brand {
		font-size: 7px;
		margin-bottom: 5px;
	}
	
	.power-section {
		gap: 6px;
		margin-bottom: 6px;
	}
	
	.remote-btn.power-btn {
		width: 28px;
		height: 28px;
	}
	
	.power-icon {
		font-size: 10px;
	}
	
	.led {
		width: 5px;
		height: 5px;
	}
	
	.channel-display {
		padding: 3px 6px;
		margin: 4px auto 5px;
	}
	
	.channel-label {
		font-size: 6px;
	}
	
	.channel-number {
		font-size: 14px;
	}
	
	.number-pad {
		gap: 3px;
		margin-bottom: 5px;
	}
	
	.remote-btn.num-btn {
		padding: 5px;
		font-size: 9px;
	}
	
	.dpad-section {
		margin: 5px 0;
	}
	
	.remote-btn.dpad-btn {
		padding: 4px 5px;
		font-size: 5px;
	}
	
	.mute-section {
		margin: 5px 0;
	}
	
	.remote-btn.mute-btn {
		font-size: 6px;
		padding: 4px 8px;
	}
	
	.vcr-section {
		margin-top: 5px;
		padding-top: 5px;
	}
	
	.vcr-label {
		font-size: 4px;
		margin-bottom: 3px;
	}
	
	.vcr-buttons {
		gap: 3px;
	}
	
	.remote-btn.vcr-btn {
		width: 22px;
		height: 18px;
		font-size: 8px;
	}
	
	.remote-btn.vcr-btn.small {
		width: 18px;
		height: 14px;
		font-size: 6px;
	}
	
	.volume-bar-section {
		margin-top: 5px;
		padding: 4px;
	}
	
	.volume-label {
		font-size: 4px;
	}
	
	.volume-bar {
		height: 4px;
	}
	
	.volume-percent {
		font-size: 6px;
	}
}


/* ==========================================
   WHAT'S NEXT PREVIEW OVERLAY
   ========================================== */

.whats-next-preview {
	position: absolute;
	bottom: 15px;
	left: 15px;
	right: 15px;
	background: linear-gradient(180deg, rgba(0, 0, 0, 0.7) 0%, rgba(13, 21, 32, 0.7) 100%);
	border: 1px solid color-mix(in srgb, var(--color-primary) 30%, transparent);
	border-color: var(--color-primary);
	border-radius: var(--radius-lg);
	padding: var(--spacing-sm);
	z-index: var(--z-overlay);
	animation: preview-slide-up var(--transition-slow) ease;
	backdrop-filter: blur(8px);
	box-shadow: 0 -3px 15px rgba(0, 0, 0, 0.5);
	max-width: 85%;
}

@keyframes preview-slide-up {
	from {
		transform: translateY(20px);
		opacity: 0;
	}
	to {
		transform: translateY(0);
		opacity: 1;
	}
}

.preview-header {
	display: flex;
	justify-content: space-between;
	align-items: center;
	margin-bottom: var(--spacing-sm);
	padding-bottom: 6px;
	border-bottom: 1px solid color-mix(in srgb, var(--color-primary) 20%, transparent);
}

.channel-badge {
	font-size: 8px;
	color: var(--color-primary);
	text-shadow: 0 0 8px var(--color-primary);
	padding: 2px 6px;
	background: var(--color-primary-dim);
	border-radius: var(--radius-sm);
	border: 1px solid var(--color-primary);
}

.live-indicator {
	font-size: 7px;
	color: var(--color-error);
	animation: live-blink 1s ease-in-out infinite;
}


.preview-now {
	margin-bottom: 10px;
}

.preview-label {
	font-size: 7px;
	color: var(--color-success);
	text-shadow: 0 0 4px var(--color-success);
	margin-bottom: 3px;
	letter-spacing: 0.5px;
}

.preview-title {
	font-size: 9px;
	color: #fff;
	margin-bottom: 5px;
	line-height: 1.3;
}

.preview-progress {
	height: 4px;
	background: rgba(255, 255, 255, 0.2);
	border-radius: 2px;
	overflow: hidden;
	margin-bottom: 5px;
}

.preview-progress-bar {
	height: 100%;
	background: linear-gradient(90deg, var(--color-success), #00ff88);
	border-radius: 2px;
	transition: width 1s linear;
	box-shadow: 0 0 10px color-mix(in srgb, var(--color-success) 50%, transparent);
}

.preview-time {
	font-size: 9px;
	color: var(--color-text-dim);
}

.preview-next {
	padding: 6px;
	background: color-mix(in srgb, var(--color-warning) 8%, transparent);
	border: 1px solid color-mix(in srgb, var(--color-warning) 20%, transparent);
	border-radius: var(--radius-sm);
	margin-bottom: 6px;
}

.preview-next .preview-label {
	color: var(--color-warning);
	text-shadow: 0 0 4px var(--color-warning);
}

.preview-next .preview-title {
	font-size: 8px;
	color: #ddd;
}

.preview-duration {
	font-size: 9px;
	color: #888;
	margin-top: 5px;
}

.preview-later {
	padding: 5px 6px;
	background: rgba(255, 255, 255, 0.03);
	border-radius: 3px;
}

.preview-later .preview-label {
	color: var(--color-text-muted);
	text-shadow: none;
}

.preview-later .preview-title {
	font-size: 8px;
	color: var(--color-text-dim);
}

/* Hide preview on small screens */
@media (max-width: 599px) {
	.whats-next-preview {
		display: none;
	}
}

/* ==========================================
   MOBILE-SPECIFIC IMPROVEMENTS
   ========================================== */

/* Touch device improvements */
@media (hover: none) and (pointer: coarse) {
	/* Larger touch targets */
	.remote-btn {
		min-height: 44px;
		min-width: 44px;
	}
	
	.menu-close-btn {
		width: 44px;
		height: 44px;
	}
	
	/* Disable hover effects on touch - no glow */
	.tv-frame-container:hover {
		transform: none;
		filter: none !important;
	}
	
	/* Remove focus/active glow on mobile */
	.tv-frame-container:focus,
	.tv-frame-container:active,
	.tv-frame-container:focus-visible,
	.tv-frame-container:focus-within {
		outline: none !important;
		box-shadow: none !important;
		filter: none !important;
		-webkit-tap-highlight-color: transparent !important;
	}
	
	.tv-frame-container .tv-frame:focus,
	.tv-frame-container .tv-frame:active,
	.tv-frame-container .tv-frame:focus-visible {
		outline: none !important;
		box-shadow: none !important;
	}
	
	/* Better scrolling in menu */
	.menu-content {
		-webkit-overflow-scrolling: touch;
		overscroll-behavior: contain;
	}
	
	/* Prevent text selection on buttons */
	.remote-btn,
	.control-btn,
	.tab-btn {
		-webkit-user-select: none;
		user-select: none;
	}
}

/* Landscape mobile improvements */
@media (max-height: 500px) and (orientation: landscape) {
	.tv-menu {
		max-height: 95vh;
	}
	
	.menu-content {
		max-height: 40vh;
	}
	
	.tv-menu-header {
		padding: 10px 15px;
	}
	
	.tab-btn {
		padding: 8px;
		font-size: 9px;
	}
}

/* Safe area handling for notched devices */
@supports (padding: env(safe-area-inset-top)) {
	.tv-frame-container:fullscreen,
	.tv-frame-container:-webkit-full-screen {
		padding-top: env(safe-area-inset-top);
		padding-bottom: env(safe-area-inset-bottom);
		padding-left: env(safe-area-inset-left);
		padding-right: env(safe-area-inset-right);
	}
	
	/* Mobile remote overlay uses bottom sheet - safe areas handled in player.css */
}

/* CRT Info Overlay - Channel and Volume Display */

/* Volume Display - Right Side Vertical (Inside TV Frame) */
/* Adjusted for 4:3 aspect ratio - taller screen requires different positioning */
.crt-volume-display {
	position: absolute;
	/* Position from right edge, stay well inside screen bounds for 4:3 */
	right: clamp(12px, 1.5vw, 18px);
	/* Position above control bar - adjusted for 4:3 taller aspect ratio */
	top: calc(50% - clamp(70px, 9vh, 90px));
	transform: translateY(-50%);
	z-index: var(--z-overlay); /* Lower than overlays but above content */
	pointer-events: none;
	opacity: 1;
	filter: blur(0px) brightness(1);
	transition: 
		opacity var(--transition-slower) ease-out,
		filter var(--transition-slower) ease-out;
	animation: volume-slide-in var(--transition-slow) cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;
	/* Ensure volume display stays within 4:3 screen bounds */
	max-height: calc(100% - clamp(120px, 15vh, 160px));
	max-width: calc(100% - clamp(24px, 3vw, 36px));
	overflow: hidden;
	/* Clip any glow/shadow that extends beyond */
	clip-path: inset(0 0 0 0);
	/* Contain within screen */
	contain: layout style paint;
}

.crt-volume-display.fade-out {
	animation: volume-fade-out var(--transition-slower) ease-out forwards !important;
}

@keyframes volume-slide-in {
	0% {
		transform: translateY(-50%) translateX(30px);
		opacity: 0;
		filter: blur(3px) brightness(1.5);
	}
	50% {
		filter: blur(1px) brightness(1.2);
	}
	100% {
		transform: translateY(-50%) translateX(0);
		opacity: 1;
		filter: blur(0px) brightness(1);
	}
}

@keyframes volume-fade-out {
	0% {
		transform: translateY(-50%) translateX(0);
		opacity: 1;
		filter: blur(0px) brightness(1);
	}
	40% {
		opacity: 0.7;
		filter: blur(2px) brightness(1.5);
	}
	100% {
		transform: translateY(-50%) translateX(15px);
		opacity: 0;
		filter: blur(5px) brightness(2.5);
	}
}

.volume-box {
	background: linear-gradient(135deg, rgba(0, 0, 0, 0.85) 0%, rgba(13, 21, 32, 0.85) 100%);
	border: 2px solid var(--color-success);
	border-radius: var(--radius-md);
	padding: var(--spacing-md) var(--spacing-sm);
	/* Reduced glow to prevent overflow - respects 4:3 bounds */
	box-shadow: 
		0 0 15px color-mix(in srgb, var(--color-success) 30%, transparent),
		0 0 30px color-mix(in srgb, var(--color-success) 10%, transparent),
		inset 0 0 15px color-mix(in srgb, var(--color-success) 10%, transparent);
	position: relative;
	min-width: 65px;
	max-width: 100%; /* Prevent overflow */
	max-height: 100%; /* Ensure respects 4:3 bounds */
	text-align: center;
	overflow: hidden; /* Ensure content is clipped */
	/* Ensure box respects parent bounds */
	contain: layout style paint;
	font-family: 'Press Start 2P', monospace;
	box-sizing: border-box; /* Include border in width calculation */
	/* Ensure box doesn't extend beyond parent */
	overflow: hidden;
}

.volume-label {
	font-size: 6px;
	color: var(--color-success);
	text-shadow: 0 0 8px var(--color-success);
	margin-bottom: 6px;
	letter-spacing: 1px;
	opacity: 0.7;
}

.volume-bars-vertical {
	display: flex;
	flex-direction: column;
	gap: 3px;
	justify-content: center;
	align-items: center;
	height: 120px;
	margin: 6px 0;
	padding: 8px;
	background: rgba(0, 0, 0, 0.5);
	border: 1px solid color-mix(in srgb, var(--color-success) 30%, transparent);
	border-radius: 4px;
}

.volume-bar-vertical {
	width: 28px;
	height: 8px;
	background: color-mix(in srgb, var(--color-success) 20%, transparent);
	border: 1px solid color-mix(in srgb, var(--color-success) 40%, transparent);
	border-radius: 2px;
	transition: all 0.1s ease;
}

.volume-bar-vertical.active {
	background: linear-gradient(90deg, var(--color-success) 0%, #00ff88 100%);
	box-shadow: 0 0 12px color-mix(in srgb, var(--color-success) 80%, transparent), inset 0 0 8px rgba(255, 255, 255, 0.2);
	border-color: var(--color-success);
}

.volume-value {
	font-size: 14px;
	color: var(--color-success);
	text-shadow: 0 0 10px var(--color-success);
	margin-top: var(--spacing-xs);
	letter-spacing: 0.5px;
}

.scanlines-small {
	position: absolute;
	top: 0;
	left: 0;
	right: 0;
	bottom: 0;
	background: repeating-linear-gradient(
		0deg,
		rgba(0, 0, 0, 0.1),
		rgba(0, 0, 0, 0.1) 1px,
		transparent 1px,
		transparent 2px
	);
	pointer-events: none;
	border-radius: 6px;
}

/* Responsive adjustments for volume display */
@media (max-width: 1023px) {
	.crt-volume-display {
		right: clamp(10px, 1.2vw, 15px);
		top: calc(50% - clamp(50px, 7vh, 70px));
		max-height: calc(100% - clamp(80px, 10vh, 120px));
	}

	.volume-box {
		padding: 10px 8px;
		min-width: 60px;
	}

	.volume-bars-vertical {
		height: 100px;
		margin: 5px 0;
		padding: 6px;
		gap: 2px;
	}

	.volume-bar-vertical {
		width: 24px;
		height: 7px;
	}

	.volume-label {
		font-size: 5px;
		margin-bottom: 5px;
	}

	.volume-value {
		font-size: 12px;
	}
}

@media (max-width: 767px) {
	.crt-volume-display {
		right: clamp(8px, 1vw, 12px);
		top: calc(50% - clamp(40px, 6vh, 60px));
		max-height: calc(100% - clamp(70px, 9vh, 100px));
	}

	.volume-box {
		padding: 9px 7px;
		min-width: 55px;
		border: 1px solid var(--color-success);
		border-radius: 5px;
	}

	.volume-bars-vertical {
		height: 80px;
		margin: 4px 0;
		padding: 5px;
		gap: 2px;
	}

	.volume-bar-vertical {
		width: 20px;
		height: 6px;
	}

	.volume-label {
		font-size: 5px;
		margin-bottom: 4px;
	}

	.volume-value {
		font-size: 11px;
		margin-top: 3px;
	}

	.scanlines-small {
		border-radius: 5px;
	}
}

@media (max-width: 480px) {
	.crt-volume-display {
		right: 10px;
	}

	.volume-box {
		padding: 8px 6px;
		min-width: 50px;
		border-radius: 4px;
	}

	.volume-bars-vertical {
		height: 60px;
		margin: 3px 0;
		padding: 4px;
		gap: 1px;
	}

	.volume-bar-vertical {
		width: 18px;
		height: 5px;
	}

	.volume-label {
		font-size: 4px;
		margin-bottom: 3px;
	}

	.volume-value {
		font-size: 10px;
		margin-top: 2px;
	}

	.scanlines-small {
		border-radius: 4px;
	}
}


/* ========================================
   RETRO TV EFFECTS - iOS Compatible
   ======================================== */

/* Tap to Start Overlay - iOS Autoplay Workaround */
.tap-to-start-overlay {
	position: absolute;
	top: 0;
	left: 0;
	width: 100%;
	height: 100%;
	background: radial-gradient(ellipse at center, #1a1a2e 0%, #000 70%);
	display: flex;
	align-items: center;
	justify-content: center;
	z-index: var(--z-ios-fullscreen);
	cursor: pointer;
	animation: tv-on-boot 2s ease-in-out infinite;
}

.tap-to-start-content {
	position: relative;
	text-align: center;
	z-index: var(--z-frame-base);
}

.crt-flicker {
	position: absolute;
	inset: -50px;
	background: radial-gradient(circle at 50% 50%, color-mix(in srgb, var(--color-primary) 10%, transparent) 0%, transparent 50%);
	animation: crt-flicker-animation var(--transition-fast) infinite;
	pointer-events: none;
}

@keyframes crt-flicker-animation {
	0%, 100% { opacity: 1; }
	50% { opacity: 0.8; }
}

@keyframes tv-on-boot {
	0%, 100% { box-shadow: inset 0 0 80px color-mix(in srgb, var(--color-primary) 20%, transparent); }
	50% { box-shadow: inset 0 0 120px color-mix(in srgb, var(--color-primary) 40%, transparent); }
}

.tap-message {
	color: var(--color-primary);
	text-shadow: 
		0 0 10px var(--color-primary),
		0 0 20px var(--color-primary),
		0 0 40px color-mix(in srgb, var(--color-primary) 80%, transparent);
	animation: pulse-glow 2s ease-in-out infinite;
}

.tap-message .tv-icon {
	font-size: 80px;
	margin-bottom: var(--spacing-xl);
	animation: float-icon 3s ease-in-out infinite;
	filter: drop-shadow(0 0 20px color-mix(in srgb, var(--color-primary) 80%, transparent));
}

@keyframes float-icon {
	0%, 100% { transform: translateY(0); }
	50% { transform: translateY(-10px); }
}

.tap-message h2 {
	font-size: 32px;
	font-weight: 700;
	margin: 10px 0;
	letter-spacing: 4px;
	font-family: 'Courier New', monospace;
}

.tap-message p {
	font-size: 16px;
	opacity: 0.8;
	margin: 10px 0;
}

.tap-hint {
	font-size: 14px;
	margin-top: 20px;
	opacity: 0.6;
	animation: blink 1.5s ease-in-out infinite;
}

@keyframes blink {
	0%, 100% { opacity: 0.6; }
	50% { opacity: 0.6; }
}

/* CRT Scanlines - Always Visible */
.crt-scanlines {
	position: absolute;
	inset: 0;
	background: repeating-linear-gradient(
0deg,
color-mix(in srgb, var(--color-text-muted) 10%, transparent) 0px,
color-mix(in srgb, var(--color-text-muted) 10%, transparent) 1px,
transparent 1px,
transparent 2px
);
	pointer-events: none;
	z-index: var(--z-crt-effects);
	opacity: 0.8;
	animation: scanline-move 8s linear infinite;
	mix-blend-mode: overlay;
}

/* Subtle CRT flicker on video content - GPU optimized */
.player-wrapper {
	will-change: transform;
	transform: translateZ(0); /* Force GPU acceleration */
}

@keyframes crt-subtle-flicker {
	0%, 100% { transform: translateZ(0) scale(1); }
	50% { transform: translateZ(0) scale(0.999); }
}

/* Respect user motion preferences */
@media (prefers-reduced-motion: reduce) {
	.player-wrapper {
		animation: none !important;
		transform: none !important;
	}
}

/* Enhanced static transition for channel switching */
.static-effect-tv {
	animation: static-intense 0.2s steps(8) infinite;
}

@keyframes static-intense {
	0% { opacity: 1; transform: translate(0, 0); }
	25% { opacity: 0.9; transform: translate(-1px, 1px); }
	50% { opacity: 1; transform: translate(1px, -1px); }
	75% { opacity: 0.9; transform: translate(-1px, -1px); }
	100% { opacity: 1; transform: translate(1px, 1px); }
}

/* Retry indicator styling */
.retry-indicator {
	position: absolute;
	bottom: var(--spacing-xl);
	left: 50%;
	transform: translateX(-50%);
	background: color-mix(in srgb, var(--color-error) 80%, transparent);
	color: white;
	padding: var(--spacing-sm) var(--spacing-lg);
	border-radius: var(--radius-sm);
	font-size: var(--font-size-sm);
	font-weight: 700;
	z-index: var(--z-overlay);
	animation: pulse 1s infinite;
}


/* Fullscreen CRT effects */
.tv-frame-container:fullscreen .crt-scanlines,
.tv-frame-container:-webkit-full-screen .crt-scanlines,
.tv-frame-container:-moz-full-screen .crt-scanlines,
.tv-frame-container:-ms-fullscreen .crt-scanlines {
	z-index: var(--z-crt-effects) !important;
}

/* Playback error overlay */
.playback-error-overlay {
	position: absolute;
	inset: 0;
	background: rgba(0, 0, 0, 0.9);
	display: flex;
	align-items: center;
	justify-content: center;
	z-index: var(--z-crt-overlay);
}

.error-message {
	color: var(--color-error);
	font-size: var(--font-size-lg);
	font-weight: 700;
	text-shadow: 0 0 10px var(--color-error);
	opacity: 0.9; /* Static - no animation */
}

/* Auto-unlock indicator - subtle waiting for interaction */
.auto-unlock-indicator {
	position: absolute;
	top: var(--spacing-sm);
	right: var(--spacing-sm);
	z-index: var(--z-auto-unlock);
	pointer-events: none;
}

.pulse-dot {
	width: 10px;
	height: 10px;
	background: var(--color-primary);
	border-radius: var(--radius-full);
	box-shadow: 0 0 10px var(--color-primary);
	animation: pulse-dot 2s ease-in-out infinite;
}


/* ===== PLAYER OVERLAYS - PERFECTLY BLENDED ===== */

/* Glass overlay - blocks all iframe interactions (RetroTV pattern) */
.player-glass-overlay {
	/* Transparent but catches all clicks */
	background: transparent;
	-webkit-tap-highlight-color: transparent;
	touch-action: manipulation;
}

/* Tap to unmute indicator */
.tap-to-unmute {
	text-transform: uppercase;
	letter-spacing: 1px;
	white-space: nowrap;
	box-shadow: var(--shadow-md);
	border: 1px solid rgba(255, 255, 255, 0.2);
	backdrop-filter: blur(4px);
	-webkit-backdrop-filter: blur(4px);
}

/* Muted autoplay overlay */
.muted-autoplay-overlay {
	position: absolute;
	top: 15px;
	left: 50%;
	transform: translateX(-50%);
	background: rgba(0, 0, 0, 0.8);
	color: var(--color-primary);
	padding: var(--spacing-sm) var(--spacing-xl);
	border-radius: var(--radius-lg);
	font-size: var(--font-size-sm);
	font-family: var(--font-primary);
	cursor: pointer;
	z-index: var(--z-menu);
	border: 1px solid var(--color-primary);
	text-shadow: 0 0 10px var(--color-primary);
	animation: pulse-glow 2s ease-in-out infinite;
	-webkit-tap-highlight-color: transparent;
}

.muted-autoplay-overlay:hover {
	background: color-mix(in srgb, var(--color-primary) 20%, transparent);
}

@keyframes pulse {
	0%, 100% {
		opacity: 0.9;
		transform: translateX(-50%) scale(1);
	}
	50% {
		opacity: 1;
		transform: translateX(-50%) scale(1.05);
	}
}

/* Static video overlay - seamless blend */
.player-wrapper video[src*="static"] {
	filter: contrast(1.1) brightness(1.05);
	mix-blend-mode: normal;
}

/* CRT scanlines over static video */
.player-wrapper .crt-scanlines {
	z-index: var(--z-player-overlay);
	mix-blend-mode: multiply;
}

/* Ensure iframe doesn't capture events */
.youtube-player-container iframe {
	pointer-events: none !important;
}

/* But allow glass to work */
.player-glass-overlay {
	pointer-events: auto;
}

/* ===== TV SURVEY - Simple, TV-like survey ===== */
.tv-survey-overlay {
	position: fixed;
	inset: 0;
	background: rgba(0, 0, 0, 0.85);
	z-index: var(--z-survey-overlay);
	display: flex;
	align-items: center;
	justify-content: center;
	animation: menu-fade-in 0.3s ease;
	padding: env(safe-area-inset-top) env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left);
}

.tv-survey {
	background: linear-gradient(180deg, #1a2a3a 0%, #0d1520 100%);
	border: 3px solid #4a9eff;
	border-radius: 15px;
	width: 90%;
	max-width: 600px;
	padding: 30px;
	box-shadow: 
		0 0 50px color-mix(in srgb, var(--color-primary) 30%, transparent),
		inset 0 0 30px rgba(0, 0, 0, 0.5);
	position: relative;
}

.tv-survey-header {
	display: flex;
	justify-content: space-between;
	align-items: center;
	margin-bottom: 20px;
}

.tv-survey-header h2 {
		color: var(--color-primary);
	font-size: 24px;
	margin: 0;
	text-shadow: 0 0 10px var(--color-primary), 0 0 20px var(--color-primary-glow);
}

.tv-survey-close {
	background: transparent;
		border: 2px solid var(--color-primary);
		color: var(--color-primary);
	width: 32px;
	height: 32px;
	border-radius: 50%;
	cursor: pointer;
	font-size: 18px;
	display: flex;
	align-items: center;
	justify-content: center;
	transition: all 0.2s ease;
}

.tv-survey-close:hover {
	background: color-mix(in srgb, var(--color-primary) 20%, transparent);
	transform: scale(1.1);
}

.tv-survey-progress {
	width: 100%;
	height: 4px;
	background: color-mix(in srgb, var(--color-primary) 20%, transparent);
	border-radius: 2px;
	margin-bottom: 30px;
	overflow: hidden;
}

.tv-survey-progress-bar {
	height: 100%;
		background: linear-gradient(90deg, var(--color-primary), var(--color-primary-hover));
	border-radius: 2px;
	transition: width 0.3s ease;
	box-shadow: 0 0 10px color-mix(in srgb, var(--color-primary) 50%, transparent);
}

.tv-survey-question {
	text-align: center;
}

.tv-survey-question-text {
	color: #d4c4b0;
	font-size: 20px;
	margin-bottom: 30px;
	line-height: 1.5;
}

.tv-survey-rating {
	display: flex;
	justify-content: center;
	gap: 15px;
	flex-wrap: wrap;
}

.tv-survey-choices {
	display: flex;
	flex-direction: column;
	gap: 15px;
	align-items: stretch;
}

.tv-survey-button {
	background: linear-gradient(180deg, #2a3a4a 0%, #1a2a3a 100%);
		border: 2px solid var(--color-primary);
	color: #d4c4b0;
	padding: 15px 25px;
	border-radius: 10px;
	cursor: pointer;
	font-size: 16px;
	transition: all 0.2s ease;
	display: flex;
	flex-direction: column;
	align-items: center;
	gap: 5px;
	min-width: 80px;
}

.tv-survey-button:hover:not(:disabled) {
	background: linear-gradient(180deg, #3a4a5a 0%, #2a3a4a 100%);
		border-color: var(--color-primary-hover);
	transform: translateY(-2px);
	box-shadow: 0 4px 15px var(--color-primary-glow);
}

.tv-survey-button.selected {
		background: linear-gradient(180deg, var(--color-primary) 0%, var(--color-primary-hover) 100%);
		border-color: var(--color-primary-hover);
	color: #fff;
	box-shadow: 0 0 20px var(--color-primary-glow);
}

.tv-survey-button:disabled {
	opacity: 0.6;
	cursor: not-allowed;
}

.tv-survey-button-value {
	font-size: 24px;
	font-weight: bold;
	color: inherit;
}

.tv-survey-button-label {
	font-size: 12px;
	color: inherit;
	opacity: 0.9;
}

.tv-survey-submitting {
	text-align: center;
	padding: 20px;
		color: var(--color-primary);
	font-size: 18px;
	animation: pulse 1s ease-in-out infinite;
}

/* Mobile responsive */
@media (max-width: 767px) {
	.tv-survey {
		width: 95%;
		padding: 20px;
	}
	
	.tv-survey-question-text {
		font-size: 18px;
	}
	
	.tv-survey-rating {
		gap: 10px;
	}
	
	.tv-survey-button {
		padding: 12px 20px;
		font-size: 14px;
		min-width: 70px;
	}
	
	.tv-survey-button-value {
		font-size: 20px;
	}
}


